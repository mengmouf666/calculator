<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>资金生命周期计算器</title>
  <!--
    本页面为资金生命周期计算器，可以在本地双击打开，或通过 GitHub Pages 在线预览。
    启用方式：仓库设置 -> Pages -> 选择分支和目录（如 main 分支根目录或 docs/）-> 保存。
    访问地址类似：https://<你的用户名>.github.io/<仓库名>/
  -->
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f8f8f8; }
    label, input { display: block; margin: 10px 0; }
    input[type="number"] { width: 200px; padding: 5px; }
    button { padding: 10px 20px; margin-top: 20px; }
    #result { margin-top: 30px; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <h2>资金生命周期计算器</h2>
  <label>初始资金（元）：<input type="number" id="initialFund" value="1900000"></label>
  <label>每月收入（元）：<input type="number" id="monthlyIncome" value="10000"></label>
  <label>年化收益率（%）：<input type="number" id="annualRate" value="3"></label>
  <label>每月支出（元）：<input type="number" id="monthlyExpense" value="12000"></label>
  <label>当前年龄：<input type="number" id="currentAge" value="36"></label>
  <label>退休年龄：<input type="number" id="retireAge" value="60"></label>
  <label>预估寿命：<input type="number" id="lifeExpectancy" value="85"></label>
  <label>退休后支出比例（如60%填60）：<input type="number" id="retireRatio" value="60"></label>
  <button onclick="calculate()">计算</button>
  <div id="result"></div>
  <script>
    function calculate() {
      const initialFund = parseFloat(document.getElementById('initialFund').value);
      const monthlyIncome = parseFloat(document.getElementById('monthlyIncome').value);
      const annualRate = parseFloat(document.getElementById('annualRate').value) / 100;
      const monthlyRate = Math.pow(1 + annualRate, 1/12) - 1;
      const monthlyExpense = parseFloat(document.getElementById('monthlyExpense').value);
      const currentAge = parseInt(document.getElementById('currentAge').value);
      const retireAge = parseInt(document.getElementById('retireAge').value);
      const lifeExpectancy = parseInt(document.getElementById('lifeExpectancy').value);
      const retireRatio = parseFloat(document.getElementById('retireRatio').value) / 100;
      let balance = initialFund;
      let resultText = '';
      let totalMonths = (lifeExpectancy - currentAge) * 12;
      let retireMonth = (retireAge - currentAge) * 12;
      for (let m = 0; m < totalMonths; m++) {
        const isRetired = m >= retireMonth;
        const income = isRetired ? 0 : monthlyIncome;
        const expense = isRetired ? monthlyExpense * retireRatio : monthlyExpense;
        const interest = balance * monthlyRate;
        const net = income + interest - expense;
        balance += net;
        if ((m + 1) % 12 === 0) {
          const age = currentAge + Math.floor((m + 1) / 12);
          resultText += `<p><strong>${age}岁</strong> 年末资产：<strong>${balance.toFixed(2)}</strong> 元</p>`;
        }
      }
      document.getElementById('result').innerHTML = resultText;
    }
  </script>
</body>
</html>
